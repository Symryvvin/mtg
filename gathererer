https://topdeck.ru/forums/topic/144062-%D1%81%D0%BE%D0%BA%D1%80%D0%BE%D0%B2%D0%B8%D1%89%D0%B0-%D1%80%D1%83%D1%84%D0%BE%D0%B9%D0%BB-%D0%B8%D0%BA%D1%81%D0%B0%D0%BB%D0%B0%D0%BD-rix-grn-m19-fnm/?tab=comments#comment-1222205

CREATE TABLE t1 (jdoc JSON);

INSERT INTO t1 VALUES('{"sypertype": 1, "types": [2,5], "subtypes": [54,123]}');
INSERT INTO t1 VALUES('{"sypertype": 1, "types": [24,5], "subtypes": [54,1223]}');
INsert into t1 values('{"sypertype": 2, "types": [1,4], "subtypes": [154,123]}');

SELECT jdoc FROM t1;

select jdoc->>"$.types" FROM t1;

SELECT json_extract(jdoc, '$.subtypes') FROM t1;

SELECT * FROM t1 WHERE json_contains(
	jdoc, 
	(SELECT CAST((type_id) AS CHAR) FROM card_type WHERE type_name = 'Legendary'), 
	'$.types');

select CAST((type_ID) AS CHAR) from card_type where type_name = 'Legendary';


CREATE TABLE facts (sentence JSON);

INSERT INTO facts VALUEs (JSON_OBJECT("mascot", "Our mascot is a dolphin named \"Sakila\"."));

SELECT sentence FROM facts;


SELECT sentence->>"$.mascot" FROM facts;





Алгоритм парсинга страницы http://gatherer.wizards.com/Pages/Card/Languages.aspx с параметром multiverseid

1. Проверка на наличие данных
	1.1. Если страница пустая возвращаем null
2. Проверка на наличие данных локализации
	2.1. Если их нет, это означает, что карта издавалась только на английском языке. Создаем объект типа Card
		2.1.1. Заполняем name из элемента с id ctl00_ctl00_ctl00_MainContent_SubContent_SubContentHeader_subtitleDisplay
		2.1.2. Заполняем multiverseid значением из параметра
		2.1.3. Значение языка language code "en"
		2.1.4. Значение oracleid = multiverseid
		2.1.5. Добавляем объект в список и возвращаем
	2.2. Если данные существуют, то парсим элементы с классом "cardItem", создавая для каждого объект Card
		2.2.1. Заполняем name, language code из таблицы
		2.2.2. Заполняем multiverseid из параметра ссылки в наименовании
		2.2.3. Ищем элемент с language code "en" и устанавливаем всем элементам oracleid = multiverseid этого элемента
		2.2.4. Возвращаем списко элементов



config.ini

[URL]
host = gatherer.wizards.com
oracle = Pages/Card/Details.aspx
printed = Pages/Card/Details.aspx?printed=true
legality = Pages/Card/Printings.aspx
language = Pages/Card/Languages.aspx 

[PATHS]
skip.lists = ['lists/empty_pages_identifiers.list', 'lists/processed_page_identifiers.list']
data.multiverse = data/card_multiverse/
data.localization = data/card_lozalization_data/
data.oracle = data/card_oracle_data/
data.details = data/card_details/
data.stats = data/card_stats/

[LIMITS]
max_id = 460172
max_threads = 50
