https://www.journaldev.com/1997/servlet-jdbc-database-connection-example

https://v4-alpha.getbootstrap.com/utilities/display-property/

https://viralpatel.net/blogs/tutorial-create-autocomplete-feature-with-java-jsp-jquery/

www.avajava.com/tutorials/lessons/how-do-i-deploy-a-maven-web-application-to-tomcat.html

package ru.aizen.dao;

import ru.aizen.wizard.Language;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

public class WizardsDao {
    private Connection connection;

    public WizardsDao(Connection connection) {
        this.connection = connection;
    }

    public String getLanguages() throws SQLException {
        var result = new ArrayList<Language>();
        String sql = "SELECT * FROM language";
        try (PreparedStatement statement = connection.prepareStatement(sql)) {
            ResultSet rs = statement.executeQuery();
            while (rs.next()) {
               result.add(new Language(rs.getInt(1), rs.getString(2), rs.getString(3), ""));
            }
        }
        return result.stream()
                .map(Language::toString).reduce("", (a, b) -> a + b + ";");
    }
}

package ru.aizen.servlet.listeners;

import ru.aizen.dao.WizardsDao;
import ru.aizen.util.ConnectionManager;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;
import java.sql.Connection;
import java.sql.SQLException;

@WebListener
public class ContextListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent event) {
        ServletContext context = event.getServletContext();
        try {
            ConnectionManager connectionManager = new ConnectionManager();
            context.setAttribute("Wizards", new WizardsDao(connectionManager.getConnection()));
            System.out.println("DB Connection initialized successfully.");
        } catch (ClassNotFoundException | SQLException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        Connection connection = (Connection) event.getServletContext().getAttribute("Wizards");
        try {
            connection.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

package ru.aizen.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class ConnectionManager {
    private Connection connection;

    public ConnectionManager() throws ClassNotFoundException, SQLException {
        Class.forName("org.sqlite.JDBC");
        this.connection = DriverManager.getConnection("jdbc:sqlite::resource:wizards.db", "", "");
    }

    public Connection getConnection() {
        return connection;
    }
}

package ru.aizen.wizard;

public class Language {
    private int id;
    private String code;
    private String description;
    private String country;
    private String flagUrl;

    public Language(int id, String code, String description, String country) {
        this.id = id;
        this.code = code;
        this.description = description;
        this.country = country;
    }

    @Override
    public String toString() {
        return "Language{" +
                "id=" + id +
                ", code='" + code + '\'' +
                ", description='" + description + '\'' +
                ", country='" + country + '\'' +
                ", flagUrl='" + flagUrl + '\'' +
                '}';
    }
}


<%@page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8"%>
<!DOCTYPE html>
<html>
	<head>
		<title>Заголовок</title>
		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	</head>
	<body>
		<div id="main">
		<jsp:include page="/language" flush="true" />
			<div class="card">
				<div class="card-header info-color white-text text-center">Проверка</div>
				<div class="card-body">
					<form action="check.jsp">
						<div>
							<input type="text" id="name" class="form-control">
								<label for="name">Наименование</label>
								<small class="form-text text-muted mb-4">на русском или английском языке</small>
							</div>
							<div class="form-row">
								<div class="col">
								  <div class="dropdown">
									<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
									  Dropdown button
									</button>
${name}
								  </div>
								</div>
								<div class="col">
									<div>
										<input type="test" id="number" class="form-control"/>
										<label for="number">Номер</label>
									</div>
								</div>
							</div>
							<button type="submit" class="btn btn-primary">Поиск</button>
						</form>
					</div>
				<div class="card-footer">Подвал</div>
			</div>
		</div>
	</body>
</html>

<!DOCTYPE html>
<html>
	<head>
		<title>Языки</title>
		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	</head>
	<body>
		<div id="main">
		    <img src="../../../flags/russia.png" class="d-inline-block"/>
		    <img src="../../../flags/china.png" class="d-inline-block"/>
		    <img src="../../../flags/united-kingdom.png" class="d-inline-block"/>
		    <img src="../../../flags/italy.png" class="d-inline-block"/>
		    <img src="../../../flags/germany.png" class="d-inline-block"/>
		    <img src="../../../flags/south-korea.png" class="d-inline-block"/>
		    <img src="../../../flags/spain.png" class="d-inline-block"/>
		    <img src="../../../flags/japan.png" class="d-inline-block"/>
		    <img src="../../../flags/france.png" class="d-inline-block"/>
		    <img src="../../../flags/brazil.png" class="d-inline-block"/>
		</div>
	</body>
</html

package ru.aizen;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;


@WebServlet("/ExampleServlet")
public class ExampleServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        String dropdown = "" +
                "<div class=\"dropdown-menu\">" +
                "<a class=\"dropdown-item\" href=\"#\">Link 1213213</a>" +
                "<a class=\"dropdown-item\" href=\"#\">Link 2312313</a>" +
                "<a class=\"dropdown-item\" href=\"#\">Link 14214143</a>" +
                "</div>";

        req.setAttribute("name", dropdown);

        req.getRequestDispatcher("/index.jsp").forward(req, resp);
    }
}

package ru.aizen.servlet;

import ru.aizen.dao.WizardsDao;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.SQLException;

@WebServlet("/language")
public class LanguageServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        WizardsDao dao = (WizardsDao) getServletContext().getAttribute("Wizards");
        try {
            req.setAttribute("languages", dao.getLanguages());
        } catch (SQLException e) {
            e.printStackTrace();
        }
        req.getRequestDispatcher("/languages.jsp").include(req, resp);
    }
}

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>ru.aizen</groupId>
    <artifactId>ExampleServlet</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <properties>
        <maven.compiler.target>11</maven.compiler.target>
        <maven.compiler.source>11</maven.compiler.source>
    </properties>

    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>4.0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.xerial</groupId>
            <artifactId>sqlite-jdbc</artifactId>
            <version>3.21.0.1</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>ExampleServlet</finalName>
    </build>

</project>

CREATE TABLE language (
	id INT,
	code VARCHAR(5) NOT NULL,
	description VARCHAR(30) NOT NULL
);

BEGIN;
INSERT INTO language (id, code, description) VALUES (1, 'en', 'English');
INSERT INTO language (id, code, description) VALUES (2, 'ru', 'Russian');
INSERT INTO language (id, code, description) VALUES (3, 'de', 'German');
INSERT INTO language (id, code, description) VALUES (4, 'fr', 'French');
INSERT INTO language (id, code, description) VALUES (5, 'it', 'Italian');
INSERT INTO language (id, code, description) VALUES (6, 'es', 'Spanish');
INSERT INTO language (id, code, description) VALUES (7, 'pt_br', 'Portuguese (Brazil)');
INSERT INTO language (id, code, description) VALUES (8, 'ja', 'Japanese');
INSERT INTO language (id, code, description) VALUES (9, 'ko', 'Korean');
INSERT INTO language (id, code, description) VALUES (10, 'zh_cn', 'Chinese Simplified');
INSERT INTO language (id, code, description) VALUES (11,'zh_tw', 'Chinese Traditional');
COMMIT;


<!DOCTYPE html>
<html>
<head>
    <title>Текущие цены на ${card_name}</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/switch.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</head>
<body>
<div class="center-block" id="main">
    <div class="card">
        <div class="card-header info-color text-center">
            ${card_name_printed}<br/>
            <hr/>
            <small>${card_name_oracle}</small>
        </div>
        <div class="text-center">
            <img src="213.png" class="rounded my-2">
        </div>
        <div class="mx-auto">
            <b>Foil price?</b>
            <label class="switch">
                <input type="checkbox">
                <span class="slider"></span>
            </label>
        </div>
        <!--	<jsp:include page="/language" flush="true" /> -->
        <div class="card-body">
            <table class="table table-sm table-striped text-center">
                <thead class="thead-dark">
                <tr>
                    <th class="align-middle">Shop</th>
                    <th class="align-middle">Min</th>
                    <th class="align-middle">Max</th>
                    <th class="align-middle">Avg</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="align-middle">CardPlace.ru</td>
                    <td class="align-middle">10</td>
                    <td class="align-middle">16</td>
                    <td class="align-middle">9.22</td>
                </tr>
                <tr>
                    <td class="align-middle">TSGPlayer.ru</td>
                    <td class="align-middle">10</td>
                    <td class="align-middle">16</td>
                    <td class="align-middle">9.22</td>
                </tr>
                <tr>
                    <td class="align-middle">MTGTrade.ru</td>
                    <td class="align-middle">10</td>
                    <td class="align-middle">16</td>
                    <td class="align-middle">9.22</td>
                </tr>
                <tr>
                    <td class="align-middle">MTGSale.ru</td>
                    <td class="align-middle">10</td>
                    <td class="align-middle">16</td>
                    <td class="align-middle">9.22</td>
                </tr>
                <tr>
                    <td class="align-middle">CardMarket.com</td>
                    <td class="align-middle">10</td>
                    <td class="align-middle">16</td>
                    <td class="align-middle">9.22</td>
                </tr>
                </tbody>
            </table>
        </div>
        <a class="btn btn-outline-secondary w-25 btn-sm mx-auto my-3" href="#" role="button">Back</a>
    </div>
</div>
</body>
</html>

body{
    background-color: #777;
}

#main{
    margin: auto;
	padding: 5px;
	min-width: 300px;
	max-width: 600px;
}

#main hr {
       margin-bottom: 0px !important;
       margin-top: 1px !important;
}

.switch input {
    display:none;
}
.switch {
    margin-left: 5px;
    display: inline-block;
    width:50px;
    height:30px;
    transform:translateY(50%);
}

.slider {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    border-radius:30px;
    box-shadow:0 0 0 2px #777, 0 0 4px #777;
    cursor:pointer;
    border:4px solid transparent;
    overflow:hidden;
     transition:.4s;
}
.slider:before {
    position:absolute;
    content:"";
    width:100%;
    height:100%;
    background:#777;
    border-radius:30px;
    transform:translateX(-20px);
    transition:.4s;
}

input:checked + .slider:before {
    transform:translateX(20px);
    background:limeGreen;
}
input:checked + .slider {
    box-shadow:0 0 0 2px limeGreen,0 0 2px limeGreen;
}

import java.util.*;
import java.util.stream.Collectors;

public class ThreadTest {
    private static final int MAX_THREADS = 20;

    public static void main(String[] args) throws InterruptedException {
        List<MyThread> threads = new ArrayList<>();
        for (int i = 1; i <= 100; i++) {
            threads.add(new MyThread(i));
            if (threads.size() == MAX_THREADS) {
                startAndWait(threads);
                List<Integer> fails = getFailedMultiVerseID(threads);
                System.out.println(threads.stream().filter(MyThread::isSuccess).map(MyThread::getName).collect(Collectors.joining("|")));
                System.out.println(fails);
                threads.clear();
            }
        }
    }

    private static void startAndWait(List<MyThread> threads) throws InterruptedException {
        threads.forEach(MyThread::start);
        for (MyThread thread : threads) {
            thread.join();
        }
    }

    private static List<Integer> getFailedMultiVerseID(List<MyThread> threads) {
        return threads.stream()
                .filter(t -> !t.isSuccess())
                .map(MyThread::getMultiVerseId)
                .collect(Collectors.toList());
    }

    public static class MyThread extends Thread {
        private boolean success;
        private int multiVerseId;

        public MyThread(int multiVerseId) {
            this.multiVerseId = multiVerseId;
        }

        @Override
        public void run() {
            try {
                Random r = new Random();
                System.out.println("start get data for multiVerseID = " + multiVerseId);
                Thread.sleep(2000);
                success = r.nextBoolean();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        public boolean isSuccess() {
            return success;
        }

        public int getMultiVerseId() {
            return multiVerseId;
        }
    }
}
